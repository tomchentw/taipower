(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[533],{1533:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return E}});var a=n(307),i=n(9096),o=n(9970),r=n(7226),l=n(5470),c=n(417),u=n(4903),d=n(5323),s=n(5722),f=n(9496),h=n(8654),m=n(9164),p=n(9202),v=n(5463),g=n(7698),x=n(6380),k=n(9767),y=n(4077),C=n(733),w=new Intl.DateTimeFormat("zh-TW",{timeZone:"Asia/Taipei",year:"numeric",month:"2-digit",day:"2-digit"}),b=function(t){var e=w.formatToParts(t),n=(0,a.Z)(e,5),i=n[0].value,o=n[2].value,r=n[4].value;return"".concat(i,"-").concat(o,"-").concat(r)},I=new Intl.DateTimeFormat("zh-TW",{timeZone:"Asia/Taipei",weekday:"narrow",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),Z=n(2024),S=f.createElement,F=b(new Date(2021,4,20));function M(){return fetch.apply(void 0,arguments).then((function(t){return t.text().then((function(e){return{lastModified:new Date(t.headers.get("last-modified")),table:e.split("\n").flatMap((function(t){var e=t.trim();return e&&","!==e?[t.split(",")]:[]}))}}))}))}function E(){var t=b(new Date),e=f.useState(t),n=(0,a.Z)(e,2),m=n[0],p=n[1],v=f.useCallback((function(e){var n=e.target.value;F<=n&&n<=t&&p(n)}),[p]),g=(0,h.ZP)(t===m?"/data/raw/loadfueltype.csv":"/data/accumulated/".concat(m.split("-").join("/"),"/loadfueltype.csv"),M,{refreshInterval:3e5}),x=g.data,y=g.error,C=f.useState(-1),w=(0,a.Z)(C,2),E=w[0],z=w[1],L=f.useCallback((function(t){var e=t.currentTarget.dataset;z(parseInt(e.index,10))}),[z]),D=f.useCallback((function(){z(-1)}),[z]);return y?S("div",null,"failed to load"):x?S(f.Fragment,null,S(i.X,{as:"h4",size:"md",textAlign:"right"},"\u73fe\u6642 ",I.format(x.lastModified),S("br",null),S(o.x,{as:"i",fontSize:"sm"},"\u8cc7\u6599\u4f86\u6e90\u6bcf\u5341\u5206\u9418\u81ea\u52d5\u66f4\u65b0")),S(r.NI,{id:"date",mt:4,display:"flex",maxW:[,"450px"],direction:["column","row"],alignItems:"center"},S(l.l,{flexShrink:"0",mb:[,0]},"\u9078\u64c7\u65e5\u671f"),S(c.I,{flex:"1 0",type:"date",min:F,max:t,value:m,onChange:v}),S(r.Q6,{pl:[,2]},"\u6700\u65e9\u53ef\u9078\u65e5\u671f\u70ba\uff1a",F)),S(u.Kq,{direction:["column",,"row"],spacing:2,mt:4},S(d.aV,{order:[,,-1],minWidth:[,,36],spacing:2,alignSelf:"center"},P.map((function(t,e){var n=t.title,a=t.color;return S(d.HC,{key:n,display:"flex",alignContent:"center",cursor:"pointer","data-index":e,onMouseEnter:L,onMouseLeave:D},S(o.x,{fontSize:"sm",flex:"1"},n),S(s.Cd,{size:6,transition:"opacity 0.2s ease-in-out",opacity:-1===E?.6:E===e?1:.2,bgColor:a,ml:4}))})).reverse()),S(s.xu,{as:k.Z,minHeight:600,order:0,sx:{"& svg path":{transition:"opacity 0.2s ease-in-out"}}},(function(t){var e=t.width,n=t.height;return e>10&&S(N,{width:e,height:n,hoveringYIndex:E,onMouseEnterYIndex:L,onMouseLeaveYIndex:D,table:x.table})})))):S(Z.Z,null)}var P=[{title:"\u6838\u80fd(Nuclear)",color:"#CC0099"},{title:"\u71c3\u7164(Coal)",color:"#E65C00"},{title:"\u6c7d\u96fb\u5171\u751f(Co-Gen)",color:"#E6E600"},{title:"\u6c11\u71df\u96fb\u5ee0-\u71c3\u7164(IPP Coal)",color:"#FFA347"},{title:"\u71c3\u6c23(LNG)",color:"#006600"},{title:"\u6c11\u71df\u96fb\u5ee0-\u71c3\u6c23(IPP LNG)",color:"#5EDFDF"},{title:"\u91cd\u6cb9(Oil)",color:"#FF1919"},{title:"\u8f15\u6cb9(Diesel)",color:"#848484"},{title:"\u6c34\u529b(Hydro)",color:"#0000B2"},{title:"\u98a8\u529b(Wind)",color:"#009933"},{title:"\u592a\u967d\u80fd(Solar)",color:"#00CC00"},{title:"\u62bd\u84c4\u767c\u96fb(Pumping Gen)",color:"#3366CC"},{title:"\u62bd\u84c4\u8ca0\u8f09(Pump Load)",color:"#6699FF"}],z=Object.keys([null].concat(P)).slice(1),L={top:40,right:10,bottom:50,left:20},D="#e0e0e0",T="#aaaaaa",A="#000000";function N(t){var e=t.width,n=t.height,i=t.hoveringYIndex,o=t.onMouseEnterYIndex,r=t.onMouseLeaveYIndex,l=t.table,c=t.margin,u=void 0===c?L:c,d=n-u.top-u.bottom,s=e-u.left-u.right,f=(0,y.Z)({range:[0,s],domain:[0,1440]}),h=(0,y.Z)({range:[d,0],domain:[0,-4e3]}),k=Array(8).fill(0).map((function(t,e){return 3*e*60}));return S("svg",{width:e,height:n},S("rect",{x:0,y:0,width:e,height:n,fill:"transparent",rx:14}),S(x.Z,{top:u.top,left:u.left},S(v.Z,{scale:h,width:s,height:d,stroke:D}),S(g.Z,{scale:f,tickValues:k,width:s,height:d,stroke:D}),S(C.Z,{keys:z,data:l,x:function(t){var e;return null!==(e=f(function(t){var e=t[0].match(/^(\d{2})\:(\d{2})$/),n=(0,a.Z)(e,3),i=(n[0],n[1]),o=n[2];return 60*parseInt(i,10)+parseInt(o,10)}(t.data)))&&void 0!==e?e:0},y0:function(t){var e;return null!==(e=h(function(t){return-t[0]}(t)))&&void 0!==e?e:0},y1:function(t){var e;return null!==(e=h(function(t){return-t[1]}(t)))&&void 0!==e?e:0}},(function(t){var e=t.stacks,n=t.path;return e.map((function(t){return S("path",{key:"stack-".concat(t.key),d:n(t)||"",stroke:"transparent",fill:P[t.index].color,opacity:-1===i?.6:i===t.index?1:.2,"data-index":t.index,onMouseEnter:o,onMouseLeave:r})}))})),S("text",{x:s-60,y:"-18",fontSize:14},"\u55ae\u4f4d\uff1a\u842c\u74e9"),S(m.Z,{left:s,scale:h,stroke:T,tickStroke:A,tickFormat:function(t){return-1*t},tickLabelProps:function(){return{fill:A,fontSize:11,textAnchor:"end",dy:"-0.33em"}}}),S(p.Z,{top:d,scale:f,stroke:T,tickValues:k,tickStroke:A,tickFormat:function(t){var e="".concat(Math.floor(t/60)),n="".concat(t%60);return"".concat(e.padStart(2,"0"),":").concat(n.padStart(2,"0"))},tickLabelProps:function(){return{fill:A,fontSize:11,textAnchor:"middle"}}})))}}}]);