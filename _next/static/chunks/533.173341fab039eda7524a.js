(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[533],{1533:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return L}});var a=n(307),r=n(9096),o=n(9970),i=n(3439),l=n(4903),u=n(5470),c=n(417),s=n(1969),d=n(8407),f=n(5794),m=n(5323),p=n(5722),v=n(9496),h=n(9481),g=n(1719),y=n(8654),b=n(2717),x=n(7768),C=n(2207),Z=n(1320),k=n(4084),w=n(1798),F=n(295),S=n(2116),T=n(9293),I=new Intl.DateTimeFormat("zh-TW",{timeZone:"Asia/Taipei",year:"numeric",month:"2-digit",day:"2-digit"}),D=function(t){var e=I.formatToParts(t),n=(0,a.Z)(e,5),r=n[0].value,o=n[2].value,i=n[4].value;return"".concat(r,"-").concat(o,"-").concat(i)},E=new Intl.DateTimeFormat("zh-TW",{timeZone:"Asia/Taipei",weekday:"narrow",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),z=n(2024),P=v.createElement,A=D(new Date(2021,4,20)),M=new Date;function Y(){return fetch.apply(void 0,arguments).then((function(t){return t.text().then((function(e){return{lastModified:new Date(t.headers.get("last-modified")),table:e.split("\n").flatMap((function(t){var e=t.trim();return e&&","!==e?[t.split(",")]:[]}))}}))}))}function L(){var t=D(M),e=v.useState(t),n=(0,a.Z)(e,2),m=n[0],p=n[1],b=v.useCallback((function(e){var n,a,r=null!==(n=null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.value)&&void 0!==n?n:e;A<=r&&r<=t&&p(r)}),[p]),x=(0,y.ZP)(t===m?"/data/raw/loadfueltype.csv":"/data/accumulated/".concat(m.split("-").join("/"),"/loadfueltype.csv"),Y,{refreshInterval:3e5}),C=x.data,Z=x.error,k=v.useRef(C);if(v.useEffect((function(){C&&(k.current=C)}),[C]),Z)return P("div",null,"failed to load");var w=C||k.current;return w?P(v.Fragment,null,P(r.X,{as:"h4",size:"md",textAlign:"right"},"\u73fe\u6642 ",E.format(w.lastModified),P("br",null),P(o.x,{as:"i",fontSize:"sm"},"\u8cc7\u6599\u4f86\u6e90\u6bcf\u5341\u5206\u9418\u81ea\u52d5\u66f4\u65b0")),P(i.NI,{id:"date",mt:4,as:l.Kq,spacing:2,direction:["column",,"row"],alignItems:[,,"center"]},P(u.l,{flexShrink:"0",mb:[,0]},"\u9078\u64c7\u65e5\u671f"),P(c.I,{flexShrink:"0",flexBasis:["100%",,48],type:"date",min:A,max:t,value:m,onChange:b}),P(s.E,{value:m,onChange:b},P(l.Ug,null,P(d.Y,{value:t},"\u4eca\u5929"),P(d.Y,{value:D((0,g.Z)(M,1))},"\u6628\u5929"),P(d.Y,{value:D((0,g.Z)(M,2))},"\u524d\u5929"))),P(i.Q6,null,"\u6700\u65e9\u53ef\u9078\u65e5\u671f\u70ba\uff1a",A)),P(h.ErrorBoundary,{fallback:P(f.M,{p:[4,10,20]},P(o.x,{as:"em",color:"red"},"You select a date with a broken data. ",P("br",null),"Try another one!")),resetKeys:[w.table]},P(N,{table:w.table}))):P(z.Z,null)}function N(t){var e=t.table,n=v.useState(-1),r=(0,a.Z)(n,2),i=r[0],u=r[1],c=v.useCallback((function(t){var e=t.currentTarget.dataset;u(parseInt(e.index,10))}),[u]),s=v.useCallback((function(){u(-1)}),[u]);return P(b.Z,null,P(l.Kq,{direction:["column",,"row"],spacing:2,mt:4},P(m.aV,{order:[2,,0],minWidth:[,,36],spacing:2,alignSelf:"center"},O.map((function(t,e){var n=t.title,a=t.color;return P(m.HC,{key:n,display:"flex",alignContent:"center",cursor:"pointer","data-index":e,onMouseEnter:c,onMouseLeave:s},P(o.x,{fontSize:"sm",flex:"1"},n,P(K,{index:e})),P(p.Cd,{size:6,transition:"opacity 0.2s ease-in-out",opacity:-1===i?.6:i===e?1:.2,bgColor:a,ml:4}))})).reverse()),P(p.xu,{width:"100%",height:600,order:1,sx:{"& svg path":{transition:"opacity 0.2s ease-in-out"}}},P(j,{hoveringYIndex:i,table:e}))))}function G(t){if(!t.tooltipOpen)return!1;var e=t.tooltipData.nearestDatum;return!(e.distance>5)&&e}function K(t){var e=t.index,n=G(v.useContext(x.Z));return"".concat(e+1)===(null===n||void 0===n?void 0:n.key)&&P(v.Fragment,null,P("br",null),n.datum[e+1])}var O=[{title:"\u6838\u80fd(Nuclear)",color:"#CC0099"},{title:"\u71c3\u7164(Coal)",color:"#E65C00"},{title:"\u6c7d\u96fb\u5171\u751f(Co-Gen)",color:"#E6E600"},{title:"\u6c11\u71df\u96fb\u5ee0-\u71c3\u7164(IPP Coal)",color:"#FFA347"},{title:"\u71c3\u6c23(LNG)",color:"#006600"},{title:"\u6c11\u71df\u96fb\u5ee0-\u71c3\u6c23(IPP LNG)",color:"#5EDFDF"},{title:"\u91cd\u6cb9(Oil)",color:"#FF1919"},{title:"\u8f15\u6cb9(Diesel)",color:"#848484"},{title:"\u6c34\u529b(Hydro)",color:"#0000B2"},{title:"\u98a8\u529b(Wind)",color:"#009933"},{title:"\u592a\u967d\u80fd(Solar)",color:"#00CC00"},{title:"\u62bd\u84c4\u767c\u96fb(Pumping Gen)",color:"#3366CC"},{title:"\u62bd\u84c4\u8ca0\u8f09(Pump Load)",color:"#6699FF"}],V=Object.keys([null].concat(O)).slice(1),W={top:0,right:30,bottom:30,left:20},_=function(t){var e=t[0].match(/^(\d{2})\:(\d{2})$/),n=(0,a.Z)(e,3),r=(n[0],n[1]),o=n[2];return 60*parseInt(r,10)+parseInt(o,10)},B=function(t){return function(e){return e[t]}},H=Array(8).fill(0).map((function(t,e){return 3*e*60}));function j(t){var e=t.hoveringYIndex,n=t.table;return P(C.Z,{xScale:{type:"linear",domain:[0,1440]},yScale:{type:"linear",domain:[0,4e3]},theme:{gridStyles:{stroke:"#e0e0e0"}},margin:W},P(Z.Z,{rows:!0,columns:!1}),P(Z.Z,{rows:!1,tickValues:H,columns:!0}),P(k.Z,{curve:T.Z,renderLine:!1},V.map((function(t,a){return P(w.Z,{key:t,dataKey:t,data:n,xAccessor:_,yAccessor:B(t),fill:O[a].color,fillOpacity:-1===e?.6:e===a?1:.2})}))),P(F.Z,{orientation:"right",label:"\u55ae\u4f4d\uff1a\u842c\u74e9",axisLabel:{fontSize:14,dx:"0.3em"}}),P(F.Z,{orientation:"bottom",tickValues:H,tickFormat:function(t){var e="".concat(Math.floor(t/60)),n="".concat(t%60);return"".concat(e.padStart(2,"0"),":").concat(n.padStart(2,"0"))}}),P(S.Z,{showHorizontalCrosshair:!1,showVerticalCrosshair:!0,snapTooltipToDatumX:!0,snapTooltipToDatumY:!0,renderTooltip:function(t){var e=G(t);return!!e&&P(v.Fragment,null,e.datum[0])}}))}}}]);