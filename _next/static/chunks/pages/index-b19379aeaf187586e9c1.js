(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{536:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return J}});var r=n(9388),a=n(9096),i=n(2882),o=n(7383),l=n(9496),u=n(307),c=n(5794),s=n(3662),d=n(9970),f=n(1081),p=n(5413),h=n(5722),m=n(7569),_=n(8654),v=l.createElement;function y(){return fetch.apply(void 0,arguments).then((function(t){return t.json()}))}function g(){var t=(0,_.ZP)("/data/raw/loadpara.json",y,{refreshInterval:3e5}),e=t.data;if(t.error)return v("div",null,"failed to load");if(!e)return v(c.M,{p:20},v(s.$,{size:"xl"}));var n=(0,u.Z)(e.records,3),r=n[0],i=r.curr_load,o=r.curr_util_rate,g=n[1],x=g.fore_maxi_sply_capacity,k=g.fore_peak_dema_load,w=(g.fore_peak_resv_capacity,g.fore_peak_resv_rate,g.fore_peak_resv_indicator),b=g.fore_peak_hour_range,E=g.publish_time,C=n[2];C.yday_date,C.yday_maxi_sply_capacity,C.yday_peak_dema_load,C.yday_peak_resv_capacity,C.yday_peak_resv_rate,C.yday_peak_resv_indicator;return v(l.Fragment,null,v(a.X,{as:"h4",size:"md",textAlign:"right"},"\u73fe\u6642 ",E,v("br",null),v(d.x,{as:"i",fontSize:"sm"},"\u8cc7\u6599\u4f86\u6e90\u6bcf\u5341\u5206\u9418\u81ea\u52d5\u66f4\u65b0")),v(f.M,{columns:[2,,4],spacing:10,py:20,as:p.pr},v(p.kN,null,v(p.dw,null,"\u76ee\u524d\u4f7f\u7528\u7387"),v(p.Jf,null," ",o,"%"),v(p.vh,null,"\u76ee\u524d\u7528\u96fb\u91cf ",i," \u842c\u74e9")),v(p.kN,null,v(p.dw,null,"\u5c16\u5cf0\u4f7f\u7528\u7387"),v(p.Jf,null,(100*k/x).toFixed(0),"%"),v(p.vh,null,"\u9810\u4f30\u6700\u9ad8\u7528\u96fb ",k," \u842c\u74e9")),v(p.kN,null,v(p.dw,null,"\u6700\u5927\u4f9b\u96fb\u80fd\u529b"),v(p.Jf,null,x," \u842c\u74e9"),v(p.vh,null,"\u9810\u4f30\u6700\u9ad8\u7528\u96fb\u6642\u6bb5 ",b)),v(p.kN,null,v(p.dw,null,"\u71c8\u865f"),v(p.Jf,null,v(h.Cd,{size:"40px",bg:{G:"green",Y:"yellow",O:"orange",R:"tomato",B:"black"}[w]})))),v(h.xu,{as:"pre",py:4,display:"none"},v(m.E,null,JSON.stringify(e,null,2))))}var x=n(4903),k=n(5323),w=n(9164),b=n(9202),E=n(5463),C=n(7698),z=n(6380),F=n(9767),M=n(4077),Z=n(733),I=new Intl.DateTimeFormat("zh-TW",{timeZone:"Asia/Taipei",weekday:"narrow",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),P=l.createElement;function S(){return fetch.apply(void 0,arguments).then((function(t){return t.text().then((function(e){return{lastModified:new Date(t.headers.get("last-modified")),table:e.split("\n").flatMap((function(t){var e=t.trim();return e&&","!==e?[t.split(",")]:[]}))}}))}))}function N(){var t=(0,_.ZP)("/data/raw/loadfueltype.csv",S,{refreshInterval:3e5}),e=t.data,n=t.error,r=l.useState(-1),i=(0,u.Z)(r,2),o=i[0],f=i[1],p=l.useCallback((function(t){var e=t.currentTarget.dataset;f(parseInt(e.index,10))}),[f]),m=l.useCallback((function(){f(-1)}),[f]);return n?P("div",null,"failed to load"):e?P(l.Fragment,null,P(a.X,{as:"h4",size:"md",textAlign:"right"},"\u73fe\u6642 ",I.format(e.lastModified),P("br",null),P(d.x,{as:"i",fontSize:"sm"},"\u8cc7\u6599\u4f86\u6e90\u6bcf\u5341\u5206\u9418\u81ea\u52d5\u66f4\u65b0")),P(x.Kq,{direction:["column",,"row"],spacing:2,mt:4},P(k.aV,{order:[,,-1],minWidth:[,,36],spacing:2,alignSelf:"center"},L.map((function(t,e){var n=t.title,r=t.color;return P(k.HC,{key:n,display:"flex",alignContent:"center",cursor:"pointer","data-index":e,onMouseEnter:p,onMouseLeave:m},P(d.x,{fontSize:"sm",flex:"1"},n),P(h.Cd,{size:6,transition:"opacity 0.2s ease-in-out",opacity:-1===o?.6:o===e?1:.2,bgColor:r,ml:4}))})).reverse()),P(h.xu,{as:F.Z,minHeight:600,order:0,sx:{"& svg path":{transition:"opacity 0.2s ease-in-out"}}},(function(t){var n=t.width,r=t.height;return n>10&&P(D,{width:n,height:r,hoveringYIndex:o,onMouseEnterYIndex:p,onMouseLeaveYIndex:m,table:e.table})})))):P(c.M,{p:20},P(s.$,{size:"xl"}))}var L=[{title:"\u6838\u80fd(Nuclear)",color:"#CC0099"},{title:"\u71c3\u7164(Coal)",color:"#E65C00"},{title:"\u6c7d\u96fb\u5171\u751f(Co-Gen)",color:"#E6E600"},{title:"\u6c11\u71df\u96fb\u5ee0-\u71c3\u7164(IPP Coal)",color:"#FFA347"},{title:"\u71c3\u6c23(LNG)",color:"#006600"},{title:"\u6c11\u71df\u96fb\u5ee0-\u71c3\u6c23(IPP LNG)",color:"#5EDFDF"},{title:"\u91cd\u6cb9(Oil)",color:"#FF1919"},{title:"\u8f15\u6cb9(Diesel)",color:"#848484"},{title:"\u6c34\u529b(Hydro)",color:"#0000B2"},{title:"\u98a8\u529b(Wind)",color:"#009933"},{title:"\u592a\u967d\u80fd(Solar)",color:"#00CC00"},{title:"\u62bd\u84c4\u767c\u96fb(Pumping Gen)",color:"#3366CC"},{title:"\u62bd\u84c4\u8ca0\u8f09(Pump Load)",color:"#6699FF"}],A=Object.keys([null].concat(L)).slice(1),O={top:40,right:10,bottom:50,left:20},W="#e0e0e0",Y="#aaaaaa",T="#000000";function D(t){var e=t.width,n=t.height,r=t.hoveringYIndex,a=t.onMouseEnterYIndex,i=t.onMouseLeaveYIndex,o=t.table,l=t.margin,c=void 0===l?O:l,s=n-c.top-c.bottom,d=e-c.left-c.right,f=(0,M.Z)({range:[0,d],domain:[0,1440]}),p=(0,M.Z)({range:[s,0],domain:[0,-4e3]}),h=Array(8).fill(0).map((function(t,e){return 3*e*60}));return P("svg",{width:e,height:n},P("rect",{x:0,y:0,width:e,height:n,fill:"transparent",rx:14}),P(z.Z,{top:c.top,left:c.left},P(E.Z,{scale:p,width:d,height:s,stroke:W}),P(C.Z,{scale:f,tickValues:h,width:d,height:s,stroke:W}),P(Z.Z,{keys:A,data:o,x:function(t){var e;return null!==(e=f(function(t){var e=t[0].match(/^(\d{2})\:(\d{2})$/),n=(0,u.Z)(e,3),r=(n[0],n[1]),a=n[2];return 60*parseInt(r,10)+parseInt(a,10)}(t.data)))&&void 0!==e?e:0},y0:function(t){var e;return null!==(e=p(function(t){return-t[0]}(t)))&&void 0!==e?e:0},y1:function(t){var e;return null!==(e=p(function(t){return-t[1]}(t)))&&void 0!==e?e:0}},(function(t){var e=t.stacks,n=t.path;return e.map((function(t){return P("path",{key:"stack-".concat(t.key),d:n(t)||"",stroke:"transparent",fill:L[t.index].color,opacity:-1===r?.6:r===t.index?1:.2,"data-index":t.index,onMouseEnter:a,onMouseLeave:i})}))})),P("text",{x:d-60,y:"-18",fontSize:14},"\u55ae\u4f4d\uff1a\u842c\u74e9"),P(w.Z,{left:d,scale:p,stroke:Y,tickStroke:T,tickFormat:function(t){return-1*t},tickLabelProps:function(){return{fill:T,fontSize:11,textAnchor:"end",dy:"-0.33em"}}}),P(b.Z,{top:s,scale:f,stroke:Y,tickValues:h,tickStroke:T,tickFormat:function(t){var e="".concat(Math.floor(t/60)),n="".concat(t%60);return"".concat(e.padStart(2,"0"),":").concat(n.padStart(2,"0"))},tickLabelProps:function(){return{fill:T,fontSize:11,textAnchor:"middle"}}})))}var G=l.createElement;function J(){return G(l.Fragment,null,G(r.W,{as:"header"},G(a.X,{size:"4xl",textAlign:"center",py:20},"\u53f0\u96fb\u8cc7\u8a0a\u93e1\u50cf\u7ad9")),G(r.W,{as:"main",maxW:"container.lg"},G(i.mQ,{isLazy:!0},G(i.td,null,G(i.OK,null,"\u4eca\u65e5\u96fb\u529b\u8cc7\u8a0a"),G(i.OK,null,"\u4eca\u65e5\u7528\u96fb\u66f2\u7dda\u5716")),G(i.nP,null,G(i.x4,null,G(g,null)),G(i.x4,null,G(N,null))))),G(r.W,{as:"footer",py:4,textAlign:"right"},G(o.r,{isExternal:!0,href:"https://vercel.com?utm_source=create-next-app&utm_medium=default-template&utm_campaign=create-next-app"},"Powered by VERCEL"),"."," ",G(o.r,{isExternal:!0,href:"https://github.com/tomchentw"},"Author: @tomchentw")))}},2360:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(536)}])}},function(t){t.O(0,[396,696],(function(){return e=2360,t(t.s=e);var e}));var e=t.O();_N_E=e}]);