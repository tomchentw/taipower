(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{536:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return $}});var a=n(9388),r=n(9096),i=n(2698),l=n(7383),o=n(9496),u=n(307),c=n(5794),d=n(3662),s=n(9970),f=n(1081),p=n(5413),m=n(5722),h=n(7569),v=n(8654),y=o.createElement;function g(){return fetch.apply(void 0,arguments).then((function(t){return t.json()}))}function _(){var t=(0,v.ZP)("/data/raw/loadpara.json",g,{refreshInterval:3e5}),e=t.data;if(t.error)return y("div",null,"failed to load");if(!e)return y(c.M,{p:20},y(d.$,{size:"xl"}));var n=(0,u.Z)(e.records,3),a=n[0],i=a.curr_load,l=a.curr_util_rate,_=n[1],x=_.fore_maxi_sply_capacity,k=_.fore_peak_dema_load,w=(_.fore_peak_resv_capacity,_.fore_peak_resv_rate,_.fore_peak_resv_indicator),b=_.fore_peak_hour_range,C=_.publish_time,E=n[2];E.yday_date,E.yday_maxi_sply_capacity,E.yday_peak_dema_load,E.yday_peak_resv_capacity,E.yday_peak_resv_rate,E.yday_peak_resv_indicator;return y(o.Fragment,null,y(r.X,{as:"h4",size:"md",textAlign:"right"},"\u73fe\u6642 ",C,y("br",null),y(s.x,{as:"i",fontSize:"sm"},"\u8cc7\u6599\u4f86\u6e90\u6bcf\u5341\u5206\u9418\u81ea\u52d5\u66f4\u65b0")),y(f.M,{columns:[2,,4],spacing:10,py:20,as:p.pr},y(p.kN,null,y(p.dw,null,"\u76ee\u524d\u4f7f\u7528\u7387"),y(p.Jf,null," ",l,"%"),y(p.vh,null,"\u76ee\u524d\u7528\u96fb\u91cf ",i," \u842c\u74e9")),y(p.kN,null,y(p.dw,null,"\u5c16\u5cf0\u4f7f\u7528\u7387"),y(p.Jf,null,(100*k/x).toFixed(0),"%"),y(p.vh,null,"\u9810\u4f30\u6700\u9ad8\u7528\u96fb ",k," \u842c\u74e9")),y(p.kN,null,y(p.dw,null,"\u6700\u5927\u4f9b\u96fb\u80fd\u529b"),y(p.Jf,null,x," \u842c\u74e9"),y(p.vh,null,"\u9810\u4f30\u6700\u9ad8\u7528\u96fb\u6642\u6bb5 ",b)),y(p.kN,null,y(p.dw,null,"\u71c8\u865f"),y(p.Jf,null,y(m.Cd,{size:"40px",bg:{G:"green",Y:"yellow",O:"orange",R:"tomato",B:"black"}[w]})))),y(m.xu,{as:"pre",py:4,display:"none"},y(h.E,null,JSON.stringify(e,null,2))))}var x=n(7226),k=n(5470),w=n(417),b=n(4903),C=n(5323),E=n(9164),I=n(9202),Z=n(5463),z=n(7698),F=n(6380),S=n(9767),M=n(4077),P=n(733),N=new Intl.DateTimeFormat("zh-TW",{timeZone:"Asia/Taipei",year:"numeric",month:"2-digit",day:"2-digit"}),A=function(t){var e=N.formatToParts(t),n=(0,u.Z)(e,5),a=n[0].value,r=n[2].value,i=n[4].value;return"".concat(a,"-").concat(r,"-").concat(i)},L=new Intl.DateTimeFormat("zh-TW",{timeZone:"Asia/Taipei",weekday:"narrow",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),T=o.createElement,W=A(new Date(2021,4,20));function D(){return fetch.apply(void 0,arguments).then((function(t){return t.text().then((function(e){return{lastModified:new Date(t.headers.get("last-modified")),table:e.split("\n").flatMap((function(t){var e=t.trim();return e&&","!==e?[t.split(",")]:[]}))}}))}))}function O(){var t=A(new Date),e=o.useState(t),n=(0,u.Z)(e,2),a=n[0],i=n[1],l=o.useCallback((function(e){var n=e.target.value;W<=n&&n<=t&&i(n)}),[i]),f=(0,v.ZP)(t===a?"/data/raw/loadfueltype.csv":"/data/accumulated/".concat(a.split("-").join("/"),"/loadfueltype.csv"),D,{refreshInterval:3e5}),p=f.data,h=f.error,y=o.useState(-1),g=(0,u.Z)(y,2),_=g[0],E=g[1],I=o.useCallback((function(t){var e=t.currentTarget.dataset;E(parseInt(e.index,10))}),[E]),Z=o.useCallback((function(){E(-1)}),[E]);return h?T("div",null,"failed to load"):p?T(o.Fragment,null,T(r.X,{as:"h4",size:"md",textAlign:"right"},"\u73fe\u6642 ",L.format(p.lastModified),T("br",null),T(s.x,{as:"i",fontSize:"sm"},"\u8cc7\u6599\u4f86\u6e90\u6bcf\u5341\u5206\u9418\u81ea\u52d5\u66f4\u65b0")),T(x.NI,{id:"date",mt:4,display:"flex",maxW:[,"450px"],direction:["column","row"],alignItems:"center"},T(k.l,{flexShrink:"0",mb:[,0]},"\u9078\u64c7\u65e5\u671f"),T(w.I,{flex:"1 0",type:"date",min:W,max:t,value:a,onChange:l}),T(x.Q6,{pl:[,2]},"\u6700\u65e9\u53ef\u9078\u65e5\u671f\u70ba\uff1a",W)),T(b.Kq,{direction:["column",,"row"],spacing:2,mt:4},T(C.aV,{order:[,,-1],minWidth:[,,36],spacing:2,alignSelf:"center"},Y.map((function(t,e){var n=t.title,a=t.color;return T(C.HC,{key:n,display:"flex",alignContent:"center",cursor:"pointer","data-index":e,onMouseEnter:I,onMouseLeave:Z},T(s.x,{fontSize:"sm",flex:"1"},n),T(m.Cd,{size:6,transition:"opacity 0.2s ease-in-out",opacity:-1===_?.6:_===e?1:.2,bgColor:a,ml:4}))})).reverse()),T(m.xu,{as:S.Z,minHeight:600,order:0,sx:{"& svg path":{transition:"opacity 0.2s ease-in-out"}}},(function(t){var e=t.width,n=t.height;return e>10&&T(H,{width:e,height:n,hoveringYIndex:_,onMouseEnterYIndex:I,onMouseLeaveYIndex:Z,table:p.table})})))):T(c.M,{p:20},T(d.$,{size:"xl"}))}var Y=[{title:"\u6838\u80fd(Nuclear)",color:"#CC0099"},{title:"\u71c3\u7164(Coal)",color:"#E65C00"},{title:"\u6c7d\u96fb\u5171\u751f(Co-Gen)",color:"#E6E600"},{title:"\u6c11\u71df\u96fb\u5ee0-\u71c3\u7164(IPP Coal)",color:"#FFA347"},{title:"\u71c3\u6c23(LNG)",color:"#006600"},{title:"\u6c11\u71df\u96fb\u5ee0-\u71c3\u6c23(IPP LNG)",color:"#5EDFDF"},{title:"\u91cd\u6cb9(Oil)",color:"#FF1919"},{title:"\u8f15\u6cb9(Diesel)",color:"#848484"},{title:"\u6c34\u529b(Hydro)",color:"#0000B2"},{title:"\u98a8\u529b(Wind)",color:"#009933"},{title:"\u592a\u967d\u80fd(Solar)",color:"#00CC00"},{title:"\u62bd\u84c4\u767c\u96fb(Pumping Gen)",color:"#3366CC"},{title:"\u62bd\u84c4\u8ca0\u8f09(Pump Load)",color:"#6699FF"}],G=Object.keys([null].concat(Y)).slice(1),J={top:40,right:10,bottom:50,left:20},X="#e0e0e0",j="#aaaaaa",V="#000000";function H(t){var e=t.width,n=t.height,a=t.hoveringYIndex,r=t.onMouseEnterYIndex,i=t.onMouseLeaveYIndex,l=t.table,o=t.margin,c=void 0===o?J:o,d=n-c.top-c.bottom,s=e-c.left-c.right,f=(0,M.Z)({range:[0,s],domain:[0,1440]}),p=(0,M.Z)({range:[d,0],domain:[0,-4e3]}),m=Array(8).fill(0).map((function(t,e){return 3*e*60}));return T("svg",{width:e,height:n},T("rect",{x:0,y:0,width:e,height:n,fill:"transparent",rx:14}),T(F.Z,{top:c.top,left:c.left},T(Z.Z,{scale:p,width:s,height:d,stroke:X}),T(z.Z,{scale:f,tickValues:m,width:s,height:d,stroke:X}),T(P.Z,{keys:G,data:l,x:function(t){var e;return null!==(e=f(function(t){var e=t[0].match(/^(\d{2})\:(\d{2})$/),n=(0,u.Z)(e,3),a=(n[0],n[1]),r=n[2];return 60*parseInt(a,10)+parseInt(r,10)}(t.data)))&&void 0!==e?e:0},y0:function(t){var e;return null!==(e=p(function(t){return-t[0]}(t)))&&void 0!==e?e:0},y1:function(t){var e;return null!==(e=p(function(t){return-t[1]}(t)))&&void 0!==e?e:0}},(function(t){var e=t.stacks,n=t.path;return e.map((function(t){return T("path",{key:"stack-".concat(t.key),d:n(t)||"",stroke:"transparent",fill:Y[t.index].color,opacity:-1===a?.6:a===t.index?1:.2,"data-index":t.index,onMouseEnter:r,onMouseLeave:i})}))})),T("text",{x:s-60,y:"-18",fontSize:14},"\u55ae\u4f4d\uff1a\u842c\u74e9"),T(E.Z,{left:s,scale:p,stroke:j,tickStroke:V,tickFormat:function(t){return-1*t},tickLabelProps:function(){return{fill:V,fontSize:11,textAnchor:"end",dy:"-0.33em"}}}),T(I.Z,{top:d,scale:f,stroke:j,tickValues:m,tickStroke:V,tickFormat:function(t){var e="".concat(Math.floor(t/60)),n="".concat(t%60);return"".concat(e.padStart(2,"0"),":").concat(n.padStart(2,"0"))},tickLabelProps:function(){return{fill:V,fontSize:11,textAnchor:"middle"}}})))}var K=o.createElement;function $(){return K(o.Fragment,null,K(a.W,{as:"header"},K(r.X,{size:"4xl",textAlign:"center",py:20},"\u53f0\u96fb\u8cc7\u8a0a\u93e1\u50cf\u7ad9")),K(a.W,{as:"main",maxW:"container.lg"},K(i.mQ,{isLazy:!0},K(i.td,null,K(i.OK,null,"\u4eca\u65e5\u96fb\u529b\u8cc7\u8a0a"),K(i.OK,null,"\u7528\u96fb\u66f2\u7dda\u5716")),K(i.nP,null,K(i.x4,null,K(_,null)),K(i.x4,null,K(O,null))))),K(a.W,{as:"footer",py:4,textAlign:"right"},K(l.r,{isExternal:!0,href:"https://vercel.com?utm_source=create-next-app&utm_medium=default-template&utm_campaign=create-next-app"},"Powered by VERCEL"),"."," ",K(l.r,{isExternal:!0,href:"https://github.com/tomchentw"},"Author: @tomchentw")))}},2360:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(536)}])}},function(t){t.O(0,[695,162],(function(){return e=2360,t(t.s=e);var e}));var e=t.O();_N_E=e}]);