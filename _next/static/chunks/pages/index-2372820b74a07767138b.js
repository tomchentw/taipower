(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{536:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return X}});var r=n(9388),a=n(9096),i=n(2882),l=n(7383),o=n(9496),u=n(307),c=n(5794),d=n(3662),s=n(9970),f=n(1081),p=n(5413),h=n(5722),m=n(7569),v=n(8654),_=o.createElement;function y(){return fetch.apply(void 0,arguments).then((function(t){return t.json()}))}function g(){var t=(0,v.ZP)("/data/raw/loadpara.json",y,{refreshInterval:3e5}),e=t.data;if(t.error)return _("div",null,"failed to load");if(!e)return _(c.M,{p:20},_(d.$,{size:"xl"}));var n=(0,u.Z)(e.records,3),r=n[0],i=r.curr_load,l=r.curr_util_rate,g=n[1],k=g.fore_maxi_sply_capacity,x=g.fore_peak_dema_load,w=(g.fore_peak_resv_capacity,g.fore_peak_resv_rate,g.fore_peak_resv_indicator),b=g.fore_peak_hour_range,C=g.publish_time,E=n[2];E.yday_date,E.yday_maxi_sply_capacity,E.yday_peak_dema_load,E.yday_peak_resv_capacity,E.yday_peak_resv_rate,E.yday_peak_resv_indicator;return _(o.Fragment,null,_(a.X,{as:"h4",size:"md",textAlign:"right"},"\u73fe\u6642 ",C,_("br",null),_(s.x,{as:"i",fontSize:"sm"},"\u8cc7\u6599\u4f86\u6e90\u6bcf\u5341\u5206\u9418\u81ea\u52d5\u66f4\u65b0")),_(f.M,{columns:[2,,4],spacing:10,py:20,as:p.pr},_(p.kN,null,_(p.dw,null,"\u76ee\u524d\u4f7f\u7528\u7387"),_(p.Jf,null," ",l,"%"),_(p.vh,null,"\u76ee\u524d\u7528\u96fb\u91cf ",i," \u842c\u74e9")),_(p.kN,null,_(p.dw,null,"\u5c16\u5cf0\u4f7f\u7528\u7387"),_(p.Jf,null,(100*x/k).toFixed(0),"%"),_(p.vh,null,"\u9810\u4f30\u6700\u9ad8\u7528\u96fb ",x," \u842c\u74e9")),_(p.kN,null,_(p.dw,null,"\u6700\u5927\u4f9b\u96fb\u80fd\u529b"),_(p.Jf,null,k," \u842c\u74e9"),_(p.vh,null,"\u9810\u4f30\u6700\u9ad8\u7528\u96fb\u6642\u6bb5 ",b)),_(p.kN,null,_(p.dw,null,"\u71c8\u865f"),_(p.Jf,null,_(h.Cd,{size:"40px",bg:{G:"green",Y:"yellow",O:"orange",R:"tomato",B:"black"}[w]})))),_(h.xu,{as:"pre",py:4,display:"none"},_(m.E,null,JSON.stringify(e,null,2))))}var k=n(4903),x=n(5323),w=n(9164),b=n(9202),C=n(5463),E=n(7698),z=n(6380),F=n(9767),Z=n(4077),P=n(733),S=new Intl.DateTimeFormat("zh-TW",{timeZone:"Asia/Taipei",weekday:"narrow",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),N=o.createElement;function A(){return fetch.apply(void 0,arguments).then((function(t){return t.text().then((function(e){return{lastModified:new Date(t.headers.get("last-modified")),table:e.split("\n").flatMap((function(t){var e=t.trim();return e&&","!==e?[t.split(",")]:[]}))}}))}))}function I(){var t=(0,v.ZP)("/data/raw/loadfueltype.csv",A,{refreshInterval:3e5}),e=t.data,n=t.error,r=o.useState(),i=(0,u.Z)(r,2),l=i[0],f=i[1],p=o.useCallback((function(t){var e=t.currentTarget.dataset;f(parseInt(e.index,10))}),[f]),m=o.useCallback((function(){f(void 0)}),[f]);return n?N("div",null,"failed to load"):e?N(o.Fragment,null,N(a.X,{as:"h4",size:"md",textAlign:"right"},"\u73fe\u6642 ",S.format(e.lastModified),N("br",null),N(s.x,{as:"i",fontSize:"sm"},"\u8cc7\u6599\u4f86\u6e90\u6bcf\u5341\u5206\u9418\u81ea\u52d5\u66f4\u65b0")),N(k.Kq,{direction:["column",,"row"],spacing:2},N(x.aV,{order:[,,-1],minWidth:[,,36],spacing:2,alignSelf:"center"},M.map((function(t,e){var n=t.title,r=t.color;return N(x.HC,{key:n,display:"flex",alignContent:"center",cursor:"pointer","data-index":e,onMouseEnter:p,onMouseLeave:m},N(s.x,{fontSize:"sm",flex:"1"},n),N(h.Cd,{size:6,bgColor:r,ml:4}))})).reverse()),N(h.xu,{as:F.Z,minHeight:600,order:0,sx:{"& svg path":{transition:"opacity 0.2s ease-in-out"},"& svg path:not(:hover):not([opacity])":{opacity:.6}}},(function(t){var n=t.width,r=t.height;return n>10&&N(G,{width:n,height:r,hoveringYIndex:l,table:e.table})})))):N(c.M,{p:20},N(d.$,{size:"xl"}))}var M=[{title:"\u6838\u80fd(Nuclear)",color:"#CC0099"},{title:"\u71c3\u7164(Coal)",color:"#E65C00"},{title:"\u6c7d\u96fb\u5171\u751f(Co-Gen)",color:"#E6E600"},{title:"\u6c11\u71df\u96fb\u5ee0-\u71c3\u7164(IPP Coal)",color:"#FFA347"},{title:"\u71c3\u6c23(LNG)",color:"#006600"},{title:"\u6c11\u71df\u96fb\u5ee0-\u71c3\u6c23(IPP LNG)",color:"#5EDFDF"},{title:"\u91cd\u6cb9(Oil)",color:"#FF1919"},{title:"\u8f15\u6cb9(Diesel)",color:"#848484"},{title:"\u6c34\u529b(Hydro)",color:"#0000B2"},{title:"\u98a8\u529b(Wind)",color:"#009933"},{title:"\u592a\u967d\u80fd(Solar)",color:"#00CC00"},{title:"\u62bd\u84c4\u767c\u96fb(Pumping Gen)",color:"#3366CC"},{title:"\u62bd\u84c4\u8ca0\u8f09(Pump Load)",color:"#6699FF"}],L=Object.keys([null].concat(M)).slice(1),O={top:40,right:30,bottom:50,left:40},W="#e0e0e0",T="#aaaaaa",D="#000000";function G(t){var e=t.width,n=t.height,r=t.hoveringYIndex,a=t.table,i=t.margin,l=void 0===i?O:i,o=t.events,c=void 0!==o&&o,d=n-l.top-l.bottom,s=e-l.left-l.right,f=(0,Z.Z)({range:[0,s],domain:[0,1440]}),p=(0,Z.Z)({range:[d,0],domain:[0,-4e3]}),h=Array(8).fill(0).map((function(t,e){return 3*e*60}));return N("svg",{width:e,height:n},N("rect",{x:0,y:0,width:e,height:n,fill:"transparent",rx:14}),N(z.Z,{top:l.top,left:l.left},N(C.Z,{scale:p,width:s,height:d,stroke:W}),N(E.Z,{scale:f,tickValues:h,width:s,height:d,stroke:W}),N(P.Z,{keys:L,data:a,x:function(t){var e;return null!==(e=f(function(t){var e=t[0].match(/^(\d{2})\:(\d{2})$/),n=(0,u.Z)(e,3),r=(n[0],n[1]),a=n[2];return 60*parseInt(r,10)+parseInt(a,10)}(t.data)))&&void 0!==e?e:0},y0:function(t){var e;return null!==(e=p(function(t){return-t[0]}(t)))&&void 0!==e?e:0},y1:function(t){var e;return null!==(e=p(function(t){return-t[1]}(t)))&&void 0!==e?e:0}},(function(t){var e=t.stacks,n=t.path;return e.map((function(t){return N("path",{key:"stack-".concat(t.key),d:n(t)||"",stroke:"transparent",fill:M[t.index].color,opacity:r===t.index?1:void 0,onClick:function(){c&&alert("".concat(t.key))}})}))})),N("text",{x:s-40,y:"-18",fontSize:14},"\u55ae\u4f4d\uff1a\u842c\u74e9"),N(w.Z,{left:s,scale:p,stroke:T,tickStroke:D,tickFormat:function(t){return-1*t},tickLabelProps:function(){return{fill:D,fontSize:11,textAnchor:"end",dy:"-0.33em"}}}),N(b.Z,{top:d,scale:f,stroke:T,tickValues:h,tickStroke:D,tickFormat:function(t){var e="".concat(Math.floor(t/60)),n="".concat(t%60);return"".concat(e.padStart(2,"0"),":").concat(n.padStart(2,"0"))},tickLabelProps:function(){return{fill:D,fontSize:11,textAnchor:"middle"}}})))}var J=o.createElement;function X(){return J(o.Fragment,null,J(r.W,{as:"header"},J(a.X,{size:"4xl",textAlign:"center",py:20},"\u53f0\u96fb\u8cc7\u8a0a\u93e1\u50cf\u7ad9")),J(r.W,{as:"main",maxW:"container.lg"},J(i.mQ,{isLazy:!0},J(i.td,null,J(i.OK,null,"\u4eca\u65e5\u96fb\u529b\u8cc7\u8a0a"),J(i.OK,null,"\u4eca\u65e5\u7528\u96fb\u66f2\u7dda\u5716")),J(i.nP,null,J(i.x4,null,J(g,null)),J(i.x4,null,J(I,null))))),J(r.W,{as:"footer",py:4,textAlign:"right"},J(l.r,{isExternal:!0,href:"https://vercel.com?utm_source=create-next-app&utm_medium=default-template&utm_campaign=create-next-app"},"Powered by VERCEL"),"."," ",J(l.r,{isExternal:!0,href:"https://github.com/tomchentw"},"Author: @tomchentw")))}},2360:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(536)}])}},function(t){t.O(0,[396,696],(function(){return e=2360,t(t.s=e);var e}));var e=t.O();_N_E=e}]);