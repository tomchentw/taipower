(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[533],{1533:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return L}});var a=n(307),r=n(9096),o=n(9970),i=n(3439),l=n(4903),u=n(5470),c=n(417),s=n(1969),d=n(8407),f=n(5323),m=n(5722),p=n(9496),v=n(1719),h=n(8654),g=n(2717),y=n(7768),x=n(2207),C=n(1320),Z=n(4084),b=n(1798),k=n(295),w=n(2116),F=n(9293),I=new Intl.DateTimeFormat("zh-TW",{timeZone:"Asia/Taipei",year:"numeric",month:"2-digit",day:"2-digit"}),S=function(t){var e=I.formatToParts(t),n=(0,a.Z)(e,5),r=n[0].value,o=n[2].value,i=n[4].value;return"".concat(r,"-").concat(o,"-").concat(i)},T=new Intl.DateTimeFormat("zh-TW",{timeZone:"Asia/Taipei",weekday:"narrow",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),D=n(2024),E=p.createElement,z=S(new Date(2021,4,20)),P=new Date;function A(){return fetch.apply(void 0,arguments).then((function(t){return t.text().then((function(e){return{lastModified:new Date(t.headers.get("last-modified")),table:e.split("\n").flatMap((function(t){var e=t.trim();return e&&","!==e?[t.split(",")]:[]}))}}))}))}function L(){var t=S(P),e=p.useState(t),n=(0,a.Z)(e,2),f=n[0],m=n[1],g=p.useCallback((function(e){var n,a,r=null!==(n=null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.value)&&void 0!==n?n:e;z<=r&&r<=t&&m(r)}),[m]),y=(0,h.ZP)(t===f?"/data/raw/loadfueltype.csv":"/data/accumulated/".concat(f.split("-").join("/"),"/loadfueltype.csv"),A,{refreshInterval:3e5}),x=y.data,C=y.error,Z=p.useRef(x);if(p.useEffect((function(){x&&(Z.current=x)}),[x]),C)return E("div",null,"failed to load");var b=x||Z.current;return b?E(p.Fragment,null,E(r.X,{as:"h4",size:"md",textAlign:"right"},"\u73fe\u6642 ",T.format(b.lastModified),E("br",null),E(o.x,{as:"i",fontSize:"sm"},"\u8cc7\u6599\u4f86\u6e90\u6bcf\u5341\u5206\u9418\u81ea\u52d5\u66f4\u65b0")),E(i.NI,{id:"date",mt:4,maxW:[,,"640px"],as:l.Kq,direction:["column",,"row"],alignItems:[,,"center"]},E(u.l,{flexShrink:"0",mb:[,0]},"\u9078\u64c7\u65e5\u671f"),E(c.I,{flex:"1 0",type:"date",min:z,max:t,value:f,onChange:g}),E(s.E,{value:f,onChange:g},E(l.Ug,null,E(d.Y,{value:t},"\u4eca\u5929"),E(d.Y,{value:S((0,v.Z)(P,1))},"\u6628\u5929"),E(d.Y,{value:S((0,v.Z)(P,2))},"\u524d\u5929"))),E(i.Q6,{pl:[,2]},"\u6700\u65e9\u53ef\u9078\u65e5\u671f\u70ba\uff1a",z)),E(M,{table:b.table})):E(D.Z,null)}function M(t){var e=t.table,n=p.useState(-1),r=(0,a.Z)(n,2),i=r[0],u=r[1],c=p.useCallback((function(t){var e=t.currentTarget.dataset;u(parseInt(e.index,10))}),[u]),s=p.useCallback((function(){u(-1)}),[u]);return E(g.Z,null,E(l.Kq,{direction:["column",,"row"],spacing:2,mt:4},E(f.aV,{order:[2,,0],minWidth:[,,36],spacing:2,alignSelf:"center"},W.map((function(t,e){var n=t.title,a=t.color;return E(f.HC,{key:n,display:"flex",alignContent:"center",cursor:"pointer","data-index":e,onMouseEnter:c,onMouseLeave:s},E(o.x,{fontSize:"sm",flex:"1"},n,E(Y,{index:e})),E(m.Cd,{size:6,transition:"opacity 0.2s ease-in-out",opacity:-1===i?.6:i===e?1:.2,bgColor:a,ml:4}))})).reverse()),E(m.xu,{width:"100%",height:600,order:1,sx:{"& svg path":{transition:"opacity 0.2s ease-in-out"}}},E(K,{hoveringYIndex:i,table:e}))))}function N(t){if(!t.tooltipOpen)return!1;var e=t.tooltipData.nearestDatum;return!(e.distance>5)&&e}function Y(t){var e=t.index,n=N(p.useContext(y.Z));return"".concat(e+1)===(null===n||void 0===n?void 0:n.key)&&E(p.Fragment,null,E("br",null),n.datum[e+1])}var W=[{title:"\u6838\u80fd(Nuclear)",color:"#CC0099"},{title:"\u71c3\u7164(Coal)",color:"#E65C00"},{title:"\u6c7d\u96fb\u5171\u751f(Co-Gen)",color:"#E6E600"},{title:"\u6c11\u71df\u96fb\u5ee0-\u71c3\u7164(IPP Coal)",color:"#FFA347"},{title:"\u71c3\u6c23(LNG)",color:"#006600"},{title:"\u6c11\u71df\u96fb\u5ee0-\u71c3\u6c23(IPP LNG)",color:"#5EDFDF"},{title:"\u91cd\u6cb9(Oil)",color:"#FF1919"},{title:"\u8f15\u6cb9(Diesel)",color:"#848484"},{title:"\u6c34\u529b(Hydro)",color:"#0000B2"},{title:"\u98a8\u529b(Wind)",color:"#009933"},{title:"\u592a\u967d\u80fd(Solar)",color:"#00CC00"},{title:"\u62bd\u84c4\u767c\u96fb(Pumping Gen)",color:"#3366CC"},{title:"\u62bd\u84c4\u8ca0\u8f09(Pump Load)",color:"#6699FF"}],G=Object.keys([null].concat(W)).slice(1),O={top:0,right:30,bottom:30,left:20},V=function(t){var e=t[0].match(/^(\d{2})\:(\d{2})$/),n=(0,a.Z)(e,3),r=(n[0],n[1]),o=n[2];return 60*parseInt(r,10)+parseInt(o,10)},_=function(t){return function(e){return e[t]}},H=Array(8).fill(0).map((function(t,e){return 3*e*60}));function K(t){var e=t.hoveringYIndex,n=t.table;return E(x.Z,{xScale:{type:"linear",domain:[0,1440]},yScale:{type:"linear",domain:[0,4e3]},theme:{gridStyles:{stroke:"#e0e0e0"}},margin:O},E(C.Z,{rows:!0,columns:!1}),E(C.Z,{rows:!1,tickValues:H,columns:!0}),E(Z.Z,{curve:F.Z,renderLine:!1},G.map((function(t,a){return E(b.Z,{key:t,dataKey:t,data:n,xAccessor:V,yAccessor:_(t),fill:W[a].color,fillOpacity:-1===e?.6:e===a?1:.2})}))),E(k.Z,{orientation:"right",label:"\u55ae\u4f4d\uff1a\u842c\u74e9",axisLabel:{fontSize:14,dx:"0.3em"}}),E(k.Z,{orientation:"bottom",tickValues:H,tickFormat:function(t){var e="".concat(Math.floor(t/60)),n="".concat(t%60);return"".concat(e.padStart(2,"0"),":").concat(n.padStart(2,"0"))}}),E(w.Z,{showHorizontalCrosshair:!1,showVerticalCrosshair:!0,snapTooltipToDatumX:!0,snapTooltipToDatumY:!0,renderTooltip:function(t){var e=N(t);return!!e&&E(p.Fragment,null,e.datum[0])}}))}}}]);